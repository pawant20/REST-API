function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{R90S:function(e,t,i){"use strict";i.r(t),i.d(t,"DeliveryModule",(function(){return z}));var r,n,o=i("PvGt"),a=i("7wI2"),l=i("pxUr"),c=i("tyNb"),s=i("3Pt+"),f=i("fXoL"),u=i("tk/3"),d=i("ofTM"),b=((r=function(){function e(t,i){var r=this;_classCallCheck(this,e),this.http=t,this.apiUrls=i,this.orderDeliverd=function(e,t){return r.http.post(r.apiUrls.orderDeliveredUrl,{orderId:e,date:t})}}return _createClass(e,[{key:"createProfile",value:function(e){return this.http.post(this.apiUrls.createDeliveryProfileUrl,e)}},{key:"isProfileExist",value:function(){return this.http.get(this.apiUrls.isProfileExistUrl)}},{key:"assignedDeliveries",value:function(e,t){return this.http.post(this.apiUrls.assignedDeliveryList,{delBoyId:e,date:t})}}]),e}()).\u0275fac=function(e){return new(e||r)(f.cc(u.b),f.cc(d.a))},r.\u0275prov=f.Kb({token:r,factory:r.\u0275fac}),r),m=i("Em6w"),v=i("IRfi"),p=i("A2Vd"),y=((n=function(){function e(t,i,r){var n=this;_classCallCheck(this,e),this.deliveryService=t,this.loginRegister=i,this.router=r,this.deliveryProfileFrom=new s.i({address1:new s.f("",[s.F.required]),city:new s.f("",[s.F.required]),zip:new s.f("",[s.F.required,s.F.minLength(6)])}),this.getUserInfo=function(){n.loginRegister.getUserInfo().subscribe((function(e){n.userInfo=e}),(function(e){console.log("unable to get user Info")}))}}return _createClass(e,[{key:"deliveryProfileData",value:function(){var e=this;console.log(this.deliveryProfileFrom.value),this.deliveryService.createProfile(this.deliveryProfileFrom.value).subscribe((function(t){e.router.navigate(["/delivery"])}),(function(e){console.log(e)}))}},{key:"ngOnInit",value:function(){this.getUserInfo()}}]),e}()).\u0275fac=function(e){return new(e||n)(f.Ob(b),f.Ob(m.a),f.Ob(c.e))},n.\u0275cmp=f.Ib({type:n,selectors:[["app-delivery-profile"]],decls:17,vars:3,consts:[[1,"container","text-centerr","my-4","py-5"],[1,"form-container","border","border-secondary"],[1,"global-heading"],[1,"p-4",3,"formGroup","ngSubmit"],[1,"form-fields"],["matInput","","placeholder","Name","readonly","",3,"value"],["matInput","","placeholder","Mobile","readonly","",3,"value"],["matInput","","placeholder","Address","formControlName","address1"],["matInput","","placeholder","City","formControlName","city"],["matInput","","placeholder","Zip","formControlName","zip"],["type","submit",1,"my-btn","d-block","text-center","hover-zoom"]],template:function(e,t){1&e&&(f.Ub(0,"div",0),f.Ub(1,"div",1),f.Ub(2,"p",2),f.Jc(3,"Delivery Boy Details"),f.Tb(),f.Ub(4,"form",3),f.gc("ngSubmit",(function(){return t.deliveryProfileData()})),f.Ub(5,"mat-form-field",4),f.Pb(6,"input",5),f.Tb(),f.Ub(7,"mat-form-field",4),f.Pb(8,"input",6),f.Tb(),f.Ub(9,"mat-form-field",4),f.Pb(10,"input",7),f.Tb(),f.Ub(11,"mat-form-field",4),f.Pb(12,"input",8),f.Tb(),f.Ub(13,"mat-form-field",4),f.Pb(14,"input",9),f.Tb(),f.Ub(15,"button",10),f.Jc(16,"Submit"),f.Tb(),f.Tb(),f.Tb(),f.Tb()),2&e&&(f.Bb(4),f.qc("formGroup",t.deliveryProfileFrom),f.Bb(2),f.qc("value",t.userInfo.name),f.Bb(2),f.qc("value",t.userInfo.mobile))},directives:[s.H,s.s,s.j,v.b,p.a,s.c,s.r,s.h],styles:[".form-container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.form-fields[_ngcontent-%COMP%]{width:100%}@media (min-width:640px){.form-container[_ngcontent-%COMP%]{max-width:65vmin}}"]}),n),g=i("mrSG"),h=i("wd/R"),D=i("ofXK"),T=i("G/Ji");function U(e,t){if(1&e){var i=f.Vb();f.Ub(0,"button",5),f.gc("click",(function(){return f.Ac(i),f.jc().createRoute()})),f.Jc(1," Create Delivery Profile "),f.Tb()}}function I(e,t){if(1&e){var i=f.Vb();f.Ub(0,"p"),f.Ub(1,"button",17),f.gc("click",(function(){f.Ac(i);var e=f.jc().$implicit;return f.jc(3).mapNavigate(null==e?null:e.location.lat,null==e?null:e.location.lng)})),f.Jc(2,"Direction"),f.Tb(),f.Tb()}}function k(e,t){1&e&&(f.Ub(0,"span",18),f.Jc(1," check_circle "),f.Tb())}var C=function(e){return{"delivery-disabled":e}};function P(e,t){if(1&e){var i=f.Vb();f.Ub(0,"button",19),f.gc("click",(function(){f.Ac(i);var e=f.jc().$implicit;return f.jc(3).delivered(e._id)})),f.Jc(1,"Delivered"),f.Tb()}if(2&e){var r=f.jc(4);f.qc("disabled",!r.isToday)("ngClass",f.uc(2,C,!r.isToday))}}function w(e,t){if(1&e&&(f.Ub(0,"ul",10),f.Ub(1,"li",11),f.Ub(2,"div",12),f.Ub(3,"div",13),f.Jc(4),f.Tb(),f.Ub(5,"div",13),f.Jc(6),f.Tb(),f.Tb(),f.Ub(7,"p"),f.Jc(8),f.Tb(),f.Ub(9,"div",12),f.Ub(10,"div",13),f.Ub(11,"p"),f.Jc(12),f.Tb(),f.Ub(13,"p"),f.Jc(14),f.Tb(),f.Ub(15,"p"),f.Jc(16),f.Tb(),f.Tb(),f.Ub(17,"div",13),f.Ub(18,"p"),f.Jc(19),f.Tb(),f.Ub(20,"p"),f.Jc(21),f.Tb(),f.Hc(22,I,3,0,"p",14),f.Tb(),f.Tb(),f.Hc(23,k,2,0,"span",15),f.Hc(24,P,2,4,"ng-template",null,16,f.Ic),f.Tb(),f.Tb()),2&e){var i=t.$implicit,r=f.zc(25),n=f.jc(3);f.Bb(4),f.Lc(" ",i.name," "),f.Bb(2),f.Lc(" ",i.mobile," "),f.Bb(2),f.Oc(" ",i.address1,", ",i.landmark,", ",i.city,"- ",i.zip," "),f.Bb(4),f.Lc(" ",i.productName," "),f.Bb(2),f.Lc(" ",i.deliveryTime," "),f.Bb(2),f.Lc(" ",i.quantityLeft+i.bounusLeft," "),f.Bb(3),f.Lc(" category : ",i.category," "),f.Bb(2),f.Lc(" Note : ",i.additionalNote," "),f.Bb(1),f.qc("ngIf",0!=(null==i||null==i.location?null:i.location.lat)),f.Bb(1),f.qc("ngIf",n.isDeliveredToday(i._id,i.deliverdDates))("ngIfElse",r)}}var B=function(e){return{"highlight-date":e}};function _(e,t){if(1&e){var i=f.Vb();f.Ub(0,"div"),f.Ub(1,"h1"),f.Jc(2,"Delivery List"),f.Tb(),f.Ub(3,"button",7),f.gc("click",(function(){return f.Ac(i),f.jc(2).todayDateDelivery()})),f.Jc(4),f.kc(5,"date"),f.Tb(),f.Ub(6,"button",8),f.gc("click",(function(){return f.Ac(i),f.jc(2).tomorrowDateDelivery()})),f.Jc(7),f.kc(8,"date"),f.Tb(),f.Hc(9,w,26,14,"ul",9),f.Tb()}if(2&e){var r=f.jc(2);f.Bb(3),f.qc("ngClass",f.uc(11,B,!r.isToday)),f.Bb(1),f.Lc(" ",f.mc(5,5,r.todayDate,"MMM, dd")," "),f.Bb(2),f.qc("ngClass",f.uc(13,B,r.isToday)),f.Bb(1),f.Lc(" ",f.mc(8,8,r.tommorrowDate,"MMM, dd")," "),f.Bb(2),f.qc("ngForOf",r.assignedDeliveriesList)}}function L(e,t){if(1&e&&(f.Ub(0,"agm-marker",23),f.Ub(1,"agm-info-window",24),f.Jc(2),f.Tb(),f.Tb()),2&e){var i=t.$implicit;f.qc("latitude",i.lat)("longitude",i.lng),f.Bb(1),f.qc("disableAutoPan",!0),f.Bb(1),f.Kc(i.label)}}function M(e,t){if(1&e&&(f.Ub(0,"div",20),f.Ub(1,"h3"),f.Jc(2,"Customers Locations"),f.Tb(),f.Ub(3,"agm-map",21),f.Hc(4,L,3,4,"agm-marker",22),f.Tb(),f.Tb()),2&e){var i=f.jc(2);f.Bb(3),f.qc("latitude",i.mapConfig.lat)("zoom",i.mapConfig.zoom)("longitude",i.mapConfig.lng),f.Bb(1),f.qc("ngForOf",i.mapConfig.markers)}}function O(e,t){if(1&e&&(f.Ub(0,"div"),f.Hc(1,_,10,15,"div",2),f.Hc(2,M,5,4,"div",6),f.Tb()),2&e){var i=f.jc(),r=f.zc(6);f.Bb(1),f.qc("ngIf",i.assignedDeliveriesList.length>0)("ngIfElse",r),f.Bb(1),f.qc("ngIf",i.allUserMap)}}function A(e,t){1&e&&(f.Ub(0,"div",25),f.Ub(1,"div",26),f.Ub(2,"div",27),f.Pb(3,"mat-spinner"),f.Tb(),f.Tb(),f.Tb())}function q(e,t){1&e&&(f.Ub(0,"div",28),f.Jc(1," No Orders "),f.Tb())}var x,J,F,j=[{path:"",component:(x=function(){function e(t,i){var r=this;_classCallCheck(this,e),this.router=t,this.delivery=i,this.assignedDeliveriesList=[],this.datefromat="YYYY-MM-DD",this.todayDate=h().format(this.datefromat),this.allUserMap=!1,this.tempDelivered=[],this.tommorrowDate=h().add(1,"day").format(this.datefromat),this.mapConfig={lat:19.286982921516454,lng:72.8644359418573,zoom:13,markers:[]},this.plotAllusersMap=function(){r.allUserMap=!0,r.assignedDeliveriesList.forEach((function(e){r.mapConfig.markers.push({lat:e.location.lat,lng:e.location.lng,label:e.name})}))},this.mapNavigate=function(e,t){window.open("https://maps.google.com/maps?q=".concat(e,",").concat(t),"_blank")},this.createRoute=function(){r.router.navigate(["/delivery/create-profile"])},this.todayDateDelivery=function(){r.isToday=!0,r.assignedDeliveriesM(r.todayDate)},this.tomorrowDateDelivery=function(){r.isToday=!1,r.assignedDeliveriesM(r.tommorrowDate)},this.savetempDeliveries=function(e,t){r.tempDelivered.push({orderId:e,delDate:t})},this.isDeliveredToday=function(e,t){var i,n=_createForOfIteratorHelper(t);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(h(o).format(r.datefromat)==r.deliveryCheckDate)return!0}}catch(s){n.e(s)}finally{n.f()}if(r.tempDelivered.length>0){var a,l=_createForOfIteratorHelper(r.tempDelivered);try{for(l.s();!(a=l.n()).done;){var c=a.value;if(c.orderId==e&&c.delDate==r.deliveryCheckDate)return!0}}catch(s){l.e(s)}finally{l.f()}}return!1},this.isFutureDeliveries=function(){},this.delivered=function(e){r.delivery.orderDeliverd(e,r.deliveryCheckDate).subscribe((function(t){r.savetempDeliveries(e,r.deliveryCheckDate)}),(function(e){console.log(e)}))},this.filterDeliveries=function(e,t){r.assignedDeliveriesList=[];var i,n=_createForOfIteratorHelper(e);try{e:for(n.s();!(i=n.n()).done;){var o,a=i.value,l=_createForOfIteratorHelper(a.skippedDates);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(h(c).format(r.datefromat)==t)continue e}}catch(s){l.e(s)}finally{l.f()}r.assignedDeliveriesList.push(a)}}catch(s){n.e(s)}finally{n.f()}r.plotAllusersMap()},this.assignedDeliveriesM=function(e){return Object(g.a)(r,void 0,void 0,regeneratorRuntime.mark((function t(){var i,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.deliveryCheckDate=e,i=this.delivery.assignedDeliveries(this.deliveryProfileId,e).toPromise(),t.next=4,i.then((function(e){r.unFilteredDeliveriesList=e})).catch((function(e){console.log(e)}));case 4:this.filterDeliveries(this.unFilteredDeliveriesList,e);case 5:case"end":return t.stop()}}),t,this)})))}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.delivery.isProfileExist().subscribe((function(t){e.recievedData=t,e.recievedData.isProfile?(e.isProfileButton=!1,e.deliveryProfileId=e.recievedData.delProfileId,e.isToday=!0,e.assignedDeliveriesM(e.todayDate)):e.isProfileButton=!0}),(function(t){e.isProfileButton=!1}))}}]),e}(),x.\u0275fac=function(e){return new(e||x)(f.Ob(c.e),f.Ob(b))},x.\u0275cmp=f.Ib({type:x,selectors:[["app-delivery-home"]],decls:7,vars:3,consts:[[1,"container","text-center","pt-5"],["class","my-btn hover-zoom",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["loading",""],["noorder",""],[1,"my-btn","hover-zoom",3,"click"],["class","my-4",4,"ngIf"],[1,"my-btn","mr-2",3,"ngClass","click"],[1,"my-btn","ml-2",3,"ngClass","click"],["class","list-group text-left mt-2",4,"ngFor","ngForOf"],[1,"list-group","text-left","mt-2"],[1,"list-group-item"],[1,"row"],[1,"col-6"],[4,"ngIf"],["class","material-icons theme-color text-right","style","font-size: 44px;",4,"ngIf","ngIfElse"],["delButton",""],[1,"my-btn",3,"click"],[1,"material-icons","theme-color","text-right",2,"font-size","44px"],[1,"my-btn","text-right",3,"disabled","ngClass","click"],[1,"my-4"],[3,"latitude","zoom","longitude"],[3,"latitude","longitude",4,"ngFor","ngForOf"],[3,"latitude","longitude"],[3,"disableAutoPan"],[1,"display-1","text-center"],[1,"my-overlay","d-flex","justify-content-center","align-items-center"],[1,"p-2"],[1,"display-4","text-center","my-4"]],template:function(e,t){if(1&e&&(f.Ub(0,"div",0),f.Hc(1,U,2,0,"button",1),f.Hc(2,O,3,3,"div",2),f.Tb(),f.Hc(3,A,4,0,"ng-template",null,3,f.Ic),f.Hc(5,q,2,0,"ng-template",null,4,f.Ic)),2&e){var i=f.zc(4);f.Bb(1),f.qc("ngIf",t.isProfileButton),f.Bb(1),f.qc("ngIf",t.assignedDeliveriesList)("ngIfElse",i)}},directives:[D.u,D.r,D.t,l.h,l.i,l.f,T.c],pipes:[D.f],styles:[".delivery-disabled[_ngcontent-%COMP%]{background-color:#dcdcdc!important}.highlight-date[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important;border:1px solid #ebebeb!important}agm-map[_ngcontent-%COMP%]{height:60vh}"]}),x)},{path:"create-profile",component:y}],H=((F=function e(){_classCallCheck(this,e)}).\u0275mod=f.Mb({type:F}),F.\u0275inj=f.Lb({factory:function(e){return new(e||F)},imports:[[c.i.forChild(j)],c.i]}),F),z=((J=function e(){_classCallCheck(this,e)}).\u0275mod=f.Mb({type:J}),J.\u0275inj=f.Lb({factory:function(e){return new(e||J)},providers:[b],imports:[[a.a,o.a,H,l.c.forRoot({apiKey:"AIzaSyAq4S6PcTl6rynGm8i0Cleh9A0nUIy57eI",libraries:["places","geometry"]})]]}),J)}}]);